use crate::runtime::python::PythonVersion;

// todo `optparse` is deprecated and yet to be removed
// todo make fun of python3 docs page being built with table layouts

pub fn is_python_stdlib_module(version: &PythonVersion, specifier: &str) -> bool {
    is_pre_python3_12_stdlib_module(specifier)
        && match version {
            PythonVersion::Python3_14 | PythonVersion::Python3_13 => {
                !is_removed_in_python3_13(specifier)
            }
            PythonVersion::Python3_12 => !is_removed_in_python3_12(specifier),
            _ => true,
        }
}

fn is_removed_in_python3_13(specifier: &str) -> bool {
    matches!(
        specifier,
        "aifc"
            | "audioop"
            | "cgi"
            | "cgitb"
            | "chunk"
            | "crypt"
            | "imghdr"
            | "mailcap"
            | "msilib"
            | "nis"
            | "nntplib"
            | "ossaudiodev"
            | "pipes"
            | "sndhdr"
            | "spwd"
            | "sunau"
            | "telnetlib"
            | "uu"
            | "xdrlib"
    ) || is_removed_in_python3_12(specifier)
}

fn is_removed_in_python3_12(specifier: &str) -> bool {
    matches!(
        specifier,
        "asyncore" | "asynchat" | "distutils" | "imp" | "smtpd"
    )
}

fn is_pre_python3_12_stdlib_module(specifier: &str) -> bool {
    matches!(
        specifier,
        "__future__"
            | "__main__"
            | "_thread"
            | "_tkinter"
            | "abc"
            | "aifc"
            | "argparse"
            | "array"
            | "ast"
            | "asynchat"
            | "asyncio"
            | "asyncore"
            | "atexit"
            | "audioop"
            | "base64"
            | "bdb"
            | "binascii"
            | "bisect"
            | "builtins"
            | "bz2"
            | "calendar"
            | "cgi"
            | "cgitb"
            | "chunk"
            | "cmath"
            | "cmd"
            | "code"
            | "codecs"
            | "codeop"
            | "collections"
            | "collections.abc"
            | "colorsys"
            | "compileall"
            | "concurrent.futures"
            | "configparser"
            | "contextlib"
            | "contextvars"
            | "copy"
            | "copyreg"
            | "cProfile"
            | "crypt"
            | "csv"
            | "ctypes"
            | "curses"
            | "curses.ascii"
            | "curses.panel"
            | "curses.textpad"
            | "dataclasses"
            | "datetime"
            | "dbm"
            | "dbm.dumb"
            | "dbm.gnu"
            | "dbm.ndbm"
            | "dbm.sqlite3"
            | "decimal"
            | "difflib"
            | "dis"
            | "distutils"
            | "doctest"
            | "email"
            | "email.charset"
            | "email.contentmanager"
            | "email.encoders"
            | "email.errors"
            | "email.generator"
            | "email.header"
            | "email.headerregistry"
            | "email.iterators"
            | "email.message"
            | "email.mime"
            | "email.mime.application"
            | "email.mime.audio"
            | "email.mime.base"
            | "email.mime.image"
            | "email.mime.message"
            | "email.mime.multipart"
            | "email.mime.nonmultipart"
            | "email.mime.text"
            | "email.parser"
            | "email.policy"
            | "email.utils"
            | "encodings.idna"
            | "encodings.mbcs"
            | "encodings.utf_8_sig"
            | "ensurepip"
            | "enum"
            | "errno"
            | "faulthandler"
            | "fcntl"
            | "filecmp"
            | "fileinput"
            | "fnmatch"
            | "fractions"
            | "ftplib"
            | "functools"
            | "gc"
            | "getopt"
            | "getpass"
            | "gettext"
            | "glob"
            | "graphlib"
            | "grp"
            | "gzip"
            | "hashlib"
            | "heapq"
            | "hmac"
            | "html"
            | "html.entities"
            | "html.parser"
            | "http"
            | "http.client"
            | "http.cookiejar"
            | "http.cookies"
            | "http.server"
            | "idlelib"
            | "imaplib"
            | "imghdr"
            | "imp"
            | "importlib"
            | "importlib.abc"
            | "importlib.machinery"
            | "importlib.metadata"
            | "importlib.resources"
            | "importlib.resources.abc"
            | "importlib.util"
            | "inspect"
            | "io"
            | "ipaddress"
            | "itertools"
            | "json"
            | "json.tool"
            | "keyword"
            | "linecache"
            | "locale"
            | "logging"
            | "logging.config"
            | "logging.handlers"
            | "lzma"
            | "mailbox"
            | "mailcap"
            | "marshal"
            | "math"
            | "mimetypes"
            | "mmap"
            | "modulefinder"
            | "msilib"
            | "msvcrt"
            | "multiprocessing"
            | "multiprocessing.connection"
            | "multiprocessing.dummy"
            | "multiprocessing.managers"
            | "multiprocessing.pool"
            | "multiprocessing.shared_memory"
            | "multiprocessing.sharedctypes"
            | "netrc"
            | "nis"
            | "nntplib"
            | "numbers"
            | "operator"
            | "optparse"
            | "os"
            | "os.path"
            | "ossaudiodev"
            | "pathlib"
            | "pdb"
            | "pickle"
            | "pickletools"
            | "pipes"
            | "pkgutil"
            | "platform"
            | "plistlib"
            | "poplib"
            | "posix"
            | "pprint"
            | "profile"
            | "pstats"
            | "pty"
            | "pwd"
            | "py_compile"
            | "pyclbr"
            | "pydoc"
            | "queue"
            | "quopri"
            | "random"
            | "re"
            | "readline"
            | "reprlib"
            | "resource"
            | "rlcompleter"
            | "runpy"
            | "sched"
            | "secrets"
            | "select"
            | "selectors"
            | "shelve"
            | "shlex"
            | "shutil"
            | "signal"
            | "site"
            | "sitecustomize"
            | "smtpd"
            | "smtplib"
            | "sndhdr"
            | "socket"
            | "socketserver"
            | "spwd"
            | "sqlite3"
            | "ssl"
            | "stat"
            | "statistics"
            | "string"
            | "stringprep"
            | "struct"
            | "subprocess"
            | "sunau"
            | "symtable"
            | "sys"
            | "sys.monitoring"
            | "sysconfig"
            | "syslog"
            | "tabnanny"
            | "tarfile"
            | "telnetlib"
            | "tempfile"
            | "termios"
            | "test"
            | "test.regrtest"
            | "test.support"
            | "test.support.bytecode_helper"
            | "test.support.import_helper"
            | "test.support.os_helper"
            | "test.support.script_helper"
            | "test.support.socket_helper"
            | "test.support.threading_helper"
            | "test.support.warnings_helper"
            | "textwrap"
            | "threading"
            | "time"
            | "timeit"
            | "tkinter"
            | "tkinter.colorchooser"
            | "tkinter.commondialog"
            | "tkinter.dnd"
            | "tkinter.filedialog"
            | "tkinter.font"
            | "tkinter.messagebox"
            | "tkinter.scrolledtext"
            | "tkinter.simpledialog"
            | "tkinter.ttk"
            | "token"
            | "tokenize"
            | "tomllib"
            | "trace"
            | "traceback"
            | "tracemalloc"
            | "tty"
            | "turtle"
            | "turtledemo"
            | "types"
            | "typing"
            | "unicodedata"
            | "unittest"
            | "unittest.mock"
            | "urllib"
            | "urllib.error"
            | "urllib.parse"
            | "urllib.request"
            | "urllib.response"
            | "urllib.robotparser"
            | "usercustomize"
            | "uu"
            | "uuid"
            | "venv"
            | "warnings"
            | "wave"
            | "weakref"
            | "webbrowser"
            | "winreg"
            | "winsound"
            | "wsgiref"
            | "wsgiref.handlers"
            | "wsgiref.headers"
            | "wsgiref.simple_server"
            | "wsgiref.types"
            | "wsgiref.util"
            | "wsgiref.validate"
            | "xdrlib"
            | "xml"
            | "xml.dom"
            | "xml.dom.minidom"
            | "xml.dom.pulldom"
            | "xml.etree.ElementInclude"
            | "xml.etree.ElementTree"
            | "xml.parsers.expat"
            | "xml.parsers.expat.errors"
            | "xml.parsers.expat.model"
            | "xml.sax"
            | "xml.sax.handler"
            | "xml.sax.saxutils"
            | "xml.sax.xmlreader"
            | "xmlrpc.client"
            | "xmlrpc.server"
            | "zipapp"
            | "zipfile"
            | "zipimport"
            | "zlib"
            | "zoneinfo"
    )
}
